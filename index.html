<!DOCTYPE html>
<html lang="en-us">
  <head>
    <title>ES6 and Beyond</title>
    <link rel="stylesheet" type="text/css" href="talk.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
  </head>
  <body>
    <header>
      <h1>ES6 and Beyond</h1>
    </header>
    <main>
      <article class="active">
        <h2><code>let</code> versus <code>var</code></h2>
        <div class="example old">
          <h3><code>var</code> is quicksand</h3>
          <pre>
var cat = 'louis';
var i;

for (i = 1; (i &lt;= 10); i++) {
  var cat = 'loopy cat #' + i;
  console.log(cat);
}
console.log(cat); // cat #10, not louis!
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>let</code> versus <code>var</code></h2>
        <div class="example new">
          <h3><code>let</code>: so scope-y fresh</h3>
          <pre>
let cat = 'louis';

for (let i = 1; (i &lt;= 10); i++) {
  let cat = 'loopy cat #' + i;
  console.log(cat);
}
 // louis the cat came back!
console.log(cat);
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>const</code> makes you think</h2>
        <div class="example old">
          <h3>Sloppy reuse of variable</h3>
          <pre class="boring">
class Cat {
  constructor(name) {
    this.name = name;
  }
  pet() {
    console.log(this.name + ' purrs.');
  }
}
          </pre>
          <pre>
let cat;

cat = new Cat('Louis');
cat.pet();

cat = new Cat('SpySpy');
// I have to read the previous line
// to know which cat this refers to
cat.pet();

// More than one Louis? Surely you jest!
cat = new Cat('Louis');
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>const</code> makes you think</h2>
        <div class="example new">
          <h3><code>const</code>: clear &amp; safe</h3>
          <pre class="boring">
class Cat {
  constructor(name) {
    this.name = name;
  }
  pet() {
    console.log(this.name + ' purrs.');
  }
}
          </pre>
          <pre>
const louis = new Cat('Louis');
louis.pet();

const spyspy = new Cat('SpySpy');
// I know which cat this is right away
spyspy.pet();

// This will fail
const louis = new Cat('Louis');
          </pre>
        </div>
      </article>
      <!-- TODO const does not freeze objects, only references -->
      <article class="inactive">
        <h2>ES6 classes: prototypes without pain</h2>
        <div class="example old">
          <h3>The awkward way</h3>
          <pre>
function Cat(name) {
  this.name = name;
}

Cat.prototype.pet = function() {
  console.log(this.name + ' purrs.');
}

const louis = new Cat('Louis');
louis.pet();
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>ES6 classes: prototypes without pain</h2>
        <div class="example new">
          <h3>The ES6 and normal programming languages way</h3>
          <pre>
class Cat {
  constructor(name) {
    this.name = name;
  }
  pet() {
    console.log(this.name + ' purrs.');
  }
}

const louis = new Cat('Louis');
louis.pet();
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>Arrow functions: functional programmer candy</h2>
        <div class="example old">
          <h3>The wordy way</h3>
          <pre>
const cats = [ 'Louis', 'SpySpy' ];
cats.forEach(function(cat) {
  console.log(`${cat} is a fine cat.`);
});
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>Arrow functions: functional programmer candy</h2>
        <div class="example new">
          <h3>The graceful way</h3>
          <pre>
const cats = [ 'Louis', 'SpySpy' ];
cats.forEach(cat =&gt; console.log(`${cat} is a fine cat.`));
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>async/await: write normal-looking code with APIs!</h2>
        <div class="example old">
          <h3>The old way: thinking about promises all day</h3>
          <pre class="boring">
function api(action, data) {
  // Asynchronous, like a real API call
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      let reversed = '';
      for (let i = (data.cat.length - 1); (i &gt;= 0); i--) {
        reversed += data.cat.charAt(i);
      }
      resolve(reversed);
    }, 500);
  });
}
          </pre>
          <pre>
// Reversing cats is very hard work,
// must call special remote API
api('reverse', { cat: 'Louis' }).then(function(reversed) {
  console.log(reversed);
  return api('reverse', { cat: 'SpySpy' });
}).then(function(reversed) {
  console.log(reversed);
  return api('reverse', { cat: 'Sammy' });
}).then(function(reversed) {
  console.log(reversed);
}).catch(function(err) {
  // Call the vet
});
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>async/await: write normal-looking code with APIs!</h2>
        <div class="example new">
          <h3>The readable way</h3>
          <pre class="boring">
function api(action, data) {
  // Asynchronous, like a real API call
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      let reversed = '';
      for (let i = (data.cat.length - 1); (i &gt;= 0); i--) {
        reversed += data.cat.charAt(i);
      }
      resolve(reversed);
    }, 500);
  });
}
          </pre>
          <pre>
async function go() {
  console.log(await api('reverse', { cat: 'Louis' }));
  console.log(await api('reverse', { cat: 'SpySpy' }));
  console.log(await api('reverse', { cat: 'Sammy' }));
}

go();
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>async/await</code>: meet <code>for...</code>of, your new BFF</h2>
        <div class="example old">
          <h3>The old way: smash into that API rate limit!</h3>
          <pre class="boring">
const rateLimit = 2;
let pending = 0;
function api(action, data) {
  // Asynchronous, like a real API call
  return new Promise((resolve, reject) =&gt; {
    if (pending &gt;= rateLimit) {
      return reject('RATE LIMITED');
    }
    pending++;
    setTimeout(() =&gt; {
      let reversed = '';
      for (let i = (data.cat.length - 1); (i &gt;= 0); i--) {
        reversed += data.cat.charAt(i);
      }
      pending--;
      resolve(reversed);
    }, 500);
  });
}
          </pre>
          <pre>
// works
const twoCats = [ 'Louis', 'SpySpy' ];
Promise.all(
  twoCats.map(cat =&gt; api('reverse', { cat: cat }))
).then(reversed =&gt; {
  console.log(reversed);
  // hits the rate limit
  const threeCats = [ 'Louis', 'SpySpy', 'Sammy' ];
  return Promise.all(
    threeCats.map(cat =&gt; api('reverse', { cat: cat }))
  );
}).then(reversed =&gt; {
  console.log(reversed);
}).catch(e =&gt; {
  console.log(`Call the vet! ${e}`);
});
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>async/await</code>: meet <code>for...</code>of, your new BFF</h2>
        <div class="example new">
          <h3>One at a time with <code>for...of</code></h3>
          <pre class="boring">
const rateLimit = 2;
let pending = 0;
function api(action, data) {
  // Asynchronous, like a real API call
  return new Promise((resolve, reject) =&gt; {
    if (pending &gt;= rateLimit) {
      return reject('RATE LIMITED');
    }
    pending++;
    setTimeout(() =&gt; {
      let reversed = '';
      for (let i = (data.cat.length - 1); (i &gt;= 0); i--) {
        reversed += data.cat.charAt(i);
      }
      pending--;
      resolve(reversed);
    }, 500);
  });
}
          </pre>
          <pre>
async function go() {
  const threeCats = [ 'Louis', 'SpySpy', 'Sammy' ];
  // Note: this trick does not work with forEach
  for (const cat of threeCats) {
    // OMG SO... NORMAL
    console.log(await api('reverse', { cat: cat }));
  }
}

go();
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>Object literal shorthand: stop typing <code>cat</code> so much</h2>
        <div class="example old">
          <h3>Yo dawg, I heard you liked typing <code>cat</code></h3>
          <pre class="boring">
const rateLimit = 2;
let pending = 0;
function api(action, data) {
  // Asynchronous, like a real API call
  return new Promise((resolve, reject) =&gt; {
    if (pending &gt;= rateLimit) {
      return reject('RATE LIMITED');
    }
    pending++;
    setTimeout(() =&gt; {
      let reversed = '';
      for (let i = (data.cat.length - 1); (i &gt;= 0); i--) {
        reversed += data.cat.charAt(i);
      }
      pending--;
      resolve(reversed);
    }, 500);
  });
}
          </pre>
          <pre>
async function go() {
  const cat = 'Louis';
  console.log(await api('reverse', { cat: cat }));
}

go();
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>Object literal shorthand: stop typing <code>cat</code> so much</h2>
        <div class="example new">
          <h3>One <code>cat</code> is nice, and will suffice</h3>
          <pre class="boring">
const rateLimit = 2;
let pending = 0;
function api(action, data) {
  // Asynchronous, like a real API call
  return new Promise((resolve, reject) =&gt; {
    if (pending &gt;= rateLimit) {
      return reject('RATE LIMITED');
    }
    pending++;
    setTimeout(() =&gt; {
      let reversed = '';
      for (let i = (data.cat.length - 1); (i &gt;= 0); i--) {
        reversed += data.cat.charAt(i);
      }
      pending--;
      resolve(reversed);
    }, 500);
  });
}
          </pre>
          <pre>
async function go() {
  const cat = 'Louis';
  console.log(await api('reverse', { cat }));
}

go();
          </pre>
        </div>
      </article>
      <!-- TODO: tail recursion (and the pun) -->
      <!-- TODO: arrow functions with bodies -->
      <!-- TODO: arrow functions and "this" and how and when it helps -->
      <article class="inactive">
        <h2><code>...</code>: give it a rest!</h2>
        <div class="example old">
          <h3><code>arguments</code>: mmm, crunchy boilerplate</h3>
          <pre>
function send(recipient, message /* , message2, message3... */) {
  var messages = Array.prototype.slice.call(arguments, 1);
  console.log(recipient + ', you have the following messages: ' +
    messages.join(', ')
  );
}

send('Louis', 'meow', 'screech', 'purr');
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>...</code>: give it a rest!</h2>
        <div class="example new">
          <h3>ellipsis is awesome</h3>
          <pre>
function send(recipient, ...messages) {
  console.log(recipient + ', you have the following messages: ' +
    messages.join(', ')
  );
}

send('Louis', 'meow', 'screech', 'purr');
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>`</code>: template strings are beautiful</h2>
        <div class="example old">
          <h3><code>blah + blech + more + blah</code>: quit typing ticks</h3>
          <pre>
function send(recipient, ...messages) {
  const joined = messages.join(', ');
  console.log(recipient + ', you have the following messages: ' + joined);
}

send('Louis', 'meow', 'screech', 'purr');
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>`</code>: template strings are beautiful</h2>
        <div class="example new">
          <h3>I <code>${love}</code> backticks</h3>
          <pre>
function send(recipient, ...messages) {
  const joined = messages.join(', ');
  console.log(`${recipient}, you have the following messages: ${joined}`);
}

send('Louis', 'meow', 'screech', 'purr');
          </pre>
        </div>
      </article>
      <!-- TODO: multiline -->
      <!-- TODO: tagged template literals -->
      <article class="inactive">
        <h2><code>...</code> returns: the object spread operator</h2>
        <div class="example old">
          <h3>The old way: default properties are a pain</h3>
          <pre>
function api(data) {
  // Make a new object, don't modify the input!
  const _data = {
    cat: data.cat || 'Louis',
    // Watch out for 0!
    priority: (data.priority !== undefined) ? data.priority : 1
  };
  console.log('Our API would receive:', _data);
}

api({});
api({ cat: 'SpySpy' });
api({ cat: 'Felix', priority: 0 });
api({ cat: 'Sammy', priority: 100000 });
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2><code>...</code> returns: the object spread operator</h2>
        <div class="example new">
          <h3><code>...</code> spreads like butter</h3>
          <pre>
function api(data) {
  const _data = {
    cat: 'Louis',
    priority: 1,
    // Pull in all the properties of data
    ...data
  };
  console.log('Our API would receive:', _data);
}

api({});
api({ cat: 'SpySpy' });
api({ cat: 'Felix', priority: 0 });
api({ cat: 'Sammy', priority: 100000 });
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>"Unspreading:" object literal assignment</h2>
        <div class="example old">
          <h3>The old way: geez I only wanted one thing</h3>
          <pre>
function getCatInfo() {
  return {
    name: 'Louis',
    age: 3,
    pets: 5000000000
  };
}

const info = getCatInfo();
console.log(info.name);
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>"Unspreading:" object literal assignment</h2>
        <div class="example new">
          <h3>Control yourself, take only what you need from it</h3>
          <pre>
function getCatInfo() {
  return {
    name: 'Louis',
    age: 3,
    pets: 5000000000
  };
}

const { name } = getCatInfo();
console.log(name);
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>"Unspreading" arguments, aka passing options by name (sort of)</h2>
        <div class="example old">
          <h3>The old way: our beloved options object</h3>
          <pre>
// Long comment documenting the options usually goes here

function send(recipient, options, ...messages) {
  if (options.style === 'terse') {
    console.log(`${recipient}: ${messages.join(', ')}`);
  } else {
    console.log(`${recipient}: ${messages.join('\r\n')}`);
  }
}

send('Louis', { style: 'terse' },
  'Felix hissed at you', 'SpySpy hissed at you'
);
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>"Unspreading" arguments, aka passing options by name (sort of)</h2>
        <div class="example new">
          <h3>The new, self-documenting way</h3>
          <pre>
function send(recipient, { style }, ...messages) {
  if (style === 'terse') {
    console.log(`${recipient}: ${messages.join(', ')}`);
  } else {
    console.log(`${recipient}: ${messages.join('\r\n')}`);
  }
}

send('Louis', { style: 'terse' }, 'Felix hissed at you', 'SpySpy hissed at you');
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>Default values for arguments</h2>
        <div class="example old">
          <h3>The old way: watch out for zero!</h3>
          <pre>
function speak(message) {
  if (message === undefined) {
    message = 'miaow';
  }
  console.log(message);
}

speak();
speak('hisssss');
          </pre>
        </div>
      </article>
      <article class="inactive">
        <h2>Default values for arguments</h2>
        <div class="example new">
          <h3>The new way: ... just look at it</h3>
          <pre>
function speak(message = 'miaow') {
  console.log(message);
}

speak();
speak('hisssss');
          </pre>
        </div>
      </article>
      <article class="title">
        <h2>Thank You</h2>
        <img class="fill" src="louis-the-cat-and-tom.jpg" />
      </article>
      <article style='background-image: linear-gradient(46deg, #CC9300 0%, #EA433A 47%, #B327BF 100%); padding: 80px; position: absolute; height: 100%; color: white;   font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
'>
        <?xml version="1.0" encoding="UTF-8"?>
        <svg width="100px" height="140px" viewBox="0 0 140 140" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <path d="M75.8683996,89.4444444 C76.6503624,89.4444444 77.4175827,89.7601084 77.9679665,90.3131369 C78.5189646,90.8661653 78.8383838,91.6362127 78.8383838,92.4210569 L78.8383838,92.4210569 L78.8383838,139.387785 C75.8143441,139.792846 72.7258062,140 69.5936553,140 C54.7572481,140 41.0074804,135.355054 29.6969697,127.432629 L29.6969697,127.432629 L47.4744905,91.1029133 C47.975733,90.0813211 49.0034028,89.4444444 50.139798,89.4444444 L50.139798,89.4444444 Z M136.818182,89.4444444 C131.231439,108.814836 117.555366,124.7399 99.6969697,133.282828 L99.6969697,133.282828 L99.6969697,92.4254545 C99.6969697,91.6394508 100.0125,90.8682658 100.56375,90.3144203 C101.120568,89.7605748 101.884646,89.4444444 102.667904,89.4444444 L102.667904,89.4444444 Z M20.3634009,89.4444444 C21.3873099,89.4444444 22.3480298,89.9810538 22.884217,90.8549072 C23.4259256,91.7287606 23.4805259,92.8317909 23.0320673,93.7602989 L23.0320673,93.7602989 L13.942651,112.424242 C8.81697111,105.625328 4.89249785,97.8575348 2.47474747,89.4444444 L2.47474747,89.4444444 Z M73.2589776,38.7723273 C73.8631835,37.5396596 75.2321449,36.8887765 76.5625009,37.1972519 C77.8977591,37.5106629 78.8383838,38.6989102 78.8383838,40.0740935 L78.8383838,40.0740935 L78.8383838,65.6355998 C78.8383838,66.4086392 78.5215741,67.1718073 77.9755827,67.7245952 C77.4295914,68.2724476 76.6746405,68.5858586 75.9000804,68.5858586 L75.9000804,68.5858586 L63.391303,68.5858586 C62.3826591,68.5858586 61.4322298,68.0571317 60.896043,67.1964853 C60.3653713,66.3302864 60.306544,65.2493886 60.7551025,64.3295149 L60.7551025,64.3295149 Z M68.9393939,0 L36.2362689,66.9212613 C35.7413826,67.9457239 34.7171402,68.5858586 33.5851799,68.5858586 L33.5851799,68.5858586 L0,68.5858586 C0.700473485,30.7857821 31.2430871,0.32006734 68.9393939,0 L68.9393939,0 Z M99.6969697,6.71717172 C122.749861,17.7259232 138.788699,41.0776899 139.292929,68.2323232 L139.292929,68.2323232 L102.648106,68.2323232 C101.869798,68.2323232 101.111288,67.918596 100.558182,67.3698808 C100.010025,66.8156293 99.6969697,66.0559172 99.6969697,65.2814414 L99.6969697,65.2814414 Z" id="Combined-Shape" fill="#FFFFFF"></path>
          </g>
        </svg>
        <h4 style="font-size: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-weight: 700;
    border-bottom: 1px solid rgba(255,255,255,0.5);
    padding: 7px 0;">
    <span style="font-size: 60px;
    position: relative;
    top: 12px;">&#x022C6</span> github.com/apostrophecms
    <span style="float: right; position: relative; top: 15px;">>' twitter.com/apostrophecms</span>
    </h4>
        <h2 style="margin: 40px 0; font-size: 64px;
    font-weight: 700;
    line-height: 110%;
    letter-spacing: 1px;">This month we will walk through a basic tutorial for building out a small sample site with Apostrophe.</h2>
    <h4 style="margin-top: 30px; display: inline-block; background-color: white; padding: 20px;">
        <a href="http://apostrophecms.com"
      style="
      background-image: linear-gradient(46deg, #CC9300 0%, #EA433A 47%, #B327BF 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: inline-block;
      font-size: 50px;
      line-height: 100%;
      "
      >apostrophecms.com</a>
    </h4>
      </article>
      <!-- TODO: ES6 imports -->
    </main>
    <footer>
      <h4 class="firm"><a href="https://apostrophecms.com">ApostropheCMS</a></h4>
      <h4 class="speaker">Thomas Boutell</h4>
    </footer>
    <script src="talk.js"></script>
  </body>
</html>
